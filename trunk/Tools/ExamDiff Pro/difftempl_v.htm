<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>$TITLE$</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<style type="text/css">
body {font-family: $FONT_FAMILY$; font-size:$FONT_SIZE$; font-style: $FONT_STYLE$; font-weight:$FONT_WEIGHT$; background-color:#C0C0C0;}
table {background-color:#FFFFFF;}
div {font-family: $FONT_FAMILY$; font-size:$FONT_SIZE$; font-style: $FONT_STYLE$; font-weight:$FONT_WEIGHT$; background-color:#FFFFFF;}
.header {width:$SPAN_WID$px; border: 1px solid #FFFFFF; color:#000000; background-color:#C0C0C0;}
.linespan_i {height:$LINE_HEIGHT$px; width:$SPAN_WID$px; color:$COLOR_IDENTICAL$; background-color:$COLOR_BK_IDENTICAL$;}
.linespan_a {height:$LINE_HEIGHT$px; width:$SPAN_WID$px; color:$COLOR_ADDED$; background-color:$COLOR_BK_ADDED$; text-decoration:$EFFECTS_ADDED$;}
.linespan_d {height:$LINE_HEIGHT$px; width:$SPAN_WID$px; color:$COLOR_DELETED$; background-color:$COLOR_BK_DELETED$; text-decoration:$EFFECTS_DELETED$;}
.linespan_c {height:$LINE_HEIGHT$px; width:$SPAN_WID$px; color:$COLOR_CHANGED$; background-color:$COLOR_BK_CHANGED$; text-decoration:$EFFECTS_CHANGED$;}
.linespan_n {height:$LINE_HEIGHT$px; width:$SPAN_WID$px; color:$COLOR_NEWER$; background-color:$COLOR_BK_NEWER$; text-decoration:$EFFECTS_NEWER$;}
.linespan_o {height:$LINE_HEIGHT$px; width:$SPAN_WID$px; color:$COLOR_OLDER$; background-color:$COLOR_BK_OLDER$; text-decoration:$EFFECTS_OLDER$;}
.linespan_g {height:$LINE_HEIGHT$px; width:$SPAN_WID$px; color:$COLOR_IGNORED$; background-color:$COLOR_BK_IGNORED$; text-decoration:$EFFECTS_IGNORED$;}
.linespan_i_b {height:1px; width:$SPAN_WID$px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color:#000000;}
.linespan_a_b {height:1px; width:$SPAN_WID$px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color:#000000;}
.linespan_d_b {height:1px; width:$SPAN_WID$px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color:#000000;}
.linespan_c_b {height:1px; width:$SPAN_WID$px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color:#000000;}
.linespan_n_b {height:1px; width:$SPAN_WID$px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color:#000000;}
.linespan_o_b {height:1px; width:$SPAN_WID$px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color:#000000;}
.linespan_g_b {height:1px; width:$SPAN_WID$px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color:#000000;}
.linespan_bin {width:$SPAN_WID$px; color:$COLOR_IDENTICAL$; background-color:$COLOR_BK_IDENTICAL$;}
.identical {color:$COLOR_IDENTICAL$; background-color:$COLOR_BK_IDENTICAL$;}
.added {color:$COLOR_ADDED$; background-color:$COLOR_BK_ADDED$; text-decoration:$EFFECTS_ADDED$;}
.deleted {color:$COLOR_DELETED$; background-color:$COLOR_BK_DELETED$; text-decoration:$EFFECTS_DELETED$;}
.changed {color:$COLOR_CHANGED$; background-color:$COLOR_BK_CHANGED$; text-decoration:$EFFECTS_CHANGED$;}
.changed2 {color:$COLOR_CHANGED2$; background-color:$COLOR_BK_CHANGED2$; text-decoration:$EFFECTS_CHANGED2$;}
.ignored {color:$COLOR_IGNORED$; background-color:$COLOR_BK_IGNORED$; text-decoration:$EFFECTS_IGNORED$;}
.newer {color:$COLOR_NEWER$; background-color:$COLOR_BK_NEWER$; text-decoration:$EFFECTS_NEWER$;}
.older {color:$COLOR_OLDER$; background-color:$COLOR_BK_OLDER$; text-decoration:$EFFECTS_OLDER$;}
$EXTRA_STYLES$
</style>
<script type="text/javascript">
// ##########################################
// ### Part 1: Basic Javascript #############
// ##########################################

window.onresize = onLoad;
var x1scroll = 0, y1scroll = 0,  x2scroll = 0, y2scroll = 0;
function getViewportHeight()
{
	// supported in Mozilla, Opera, and Safari
	if(window.innerHeight)
		return window.innerHeight;

	// supported in standards mode of IE, but not in any other mode
	if(window.document.documentElement.clientHeight)
		return document.documentElement.clientHeight;

	// supported in quirks mode, older versions of IE, and mac IE (anything else).
	return window.document.body.clientHeight;
}
function getViewportWidth()
{
	// supported in Mozilla, Opera, and Safari
	if(window.innerWidth)
		return window.innerWidth;

	// supported in standards mode of IE, but not in any other mode
	if(window.document.documentElement.clientWidth)
		return document.documentElement.clientWidth;

	// supported in quirks mode, older versions of IE, and mac IE (anything else).
	return window.document.body.clientWidth;
}
function synchScroll(index)
{
	var el1, el2;
	if (document.all)
	{
		el1 = document.all.d21;
		el2 = document.all.d22;
	}
	else
	{
		el1 = document.getElementById("d21");
		el2 = document.getElementById("d22");
	}
	if (index == 1)
	{
		x1scroll = el1.scrollLeft;
		y1scroll = el1.scrollTop;
		if (el2.scrollLeft != x1scroll)
			el2.scrollLeft = x1scroll;
		if (el2.scrollTop != y1scroll)
			el2.scrollTop = y1scroll;
	}
	else
	{
		x2scroll = el2.scrollLeft;
		y2scroll = el2.scrollTop;
		if (el1.scrollLeft != x2scroll)
			el1.scrollLeft = x2scroll;
		if (el1.scrollTop != y2scroll)
			el1.scrollTop = y2scroll;
	}
}


// ##########################################
// ### Part 2: onLoad + Navigation Code #####
// ##########################################

//
// event handlers
//
function onLoad()
{
	var bodyWid = getViewportWidth();
	var bodyHeight = getViewportHeight();
	var tableWid = bodyWid - 40, tableHeight = bodyHeight - 130;
	var tdWid = (tableWid / 2) - 5;
	var tdHeight = (tableHeight / 2) - 5;
	populate_combobox($NUM_DIFFS$);
	if (tdWid > 0 && tdHeight > 0)
	{
		if (document.all)
		{
			document.all.tmain.style.width = tableWid + 'px';
			document.all.t11.style.width = tdWid + 'px';
			document.all.t12.style.width = tdWid + 'px';
			document.all.d11.style.width = tdWid + 'px';
			document.all.d12.style.width = tdWid + 'px';
			document.all.d21.style.height = tableHeight + 'px';
			document.all.d22.style.height = tableHeight + 'px';
			document.all.d21.style.width = tdWid + 'px';
			document.all.d22.style.width = tdWid + 'px';
		}
		else
		{
			document.getElementById("tmain").style.width = tableWid + 'px';
			document.getElementById("t11").style.width = tdWid + 'px';
			document.getElementById("t12").style.width = tdWid + 'px';
			document.getElementById("d11").style.width = tdWid + 'px';
			document.getElementById("d12").style.width = tdWid + 'px';
			document.getElementById("d21").style.height = tableHeight + 'px';
			document.getElementById("d22").style.height = tableHeight + 'px';
			document.getElementById("d21").style.width = tdWid + 'px';
			document.getElementById("d22").style.width = tdWid + 'px';
		}
	}
	// This will change width of the styles from header to linespan_bin, if necessary
	for(i=3;i<=18;i+=1)
		change_width(i, tdWid);
}

function change_width(style, newWid)
{
	var theRules = new Array();
	if (document.styleSheets[0].cssRules)
	{
		theRules = document.styleSheets[0].cssRules;
	}
	else if (document.styleSheets[0].rules)
	{
		theRules = document.styleSheets[0].rules;
	}
	//alert(parseInt(theRules[style].style.width));
	if (parseInt(theRules[style].style.width) < newWid)
		theRules[style].style.width = newWid + "px";
	//alert(theRules[style].style.cssText);
}

function populate_combobox(numdiffs)
{
	var combobox = document.getElementById('currentdiff');
	for(i=1;i<=numdiffs;i+=1)
	{
		combobox.options[i] = new Option("Diff #"+i,i);
	}
}

function goto(diff)
{
	var combobox = document.getElementById('currentdiff');
	if (diff > 0 && diff < combobox.options.length)
	{
		combobox.selectedIndex = diff;
		window.location.href = "#D" + diff;
	}
}

function first()
{
	var combobox = document.getElementById('currentdiff');
	var diff = 1;
	goto(1);
}
function previous()
{
	var combobox = document.getElementById('currentdiff');
	var diff = combobox.selectedIndex;
	if (diff > 1)
		diff--;
	goto(diff);
}
function next()
{
	var combobox = document.getElementById('currentdiff');
	var diff = combobox.selectedIndex;
	if (combobox.options.length - 1 > diff)
		diff++;
	goto(diff);
}
function last()
{
	var combobox = document.getElementById('currentdiff');
	var diff = combobox.options.length - 1;
	goto(diff);
}
function change()
{
	var combobox = document.getElementById('currentdiff');
	var diff = combobox.selectedIndex;
	goto(diff);
}

</script>
</head>
<body onload="onLoad()">
<table id="tmain" style="border: 2px solid #000000; width:$TABLE_WID$px;" cellpadding="2">
	<tr valign="top">
		<td>
			<table id="t1">
				<tr valign="top">
					<td id="t11" style="border: 1px solid #000000"><div id="d11" style="background-color: #C0C0C0; width:$COLUMN_WID$px; overflow: hidden;" title="$FILE1_TITLE$"><b>$FILE1_TITLE$</b></div></td>
					<td id="t12" style="border: 1px solid #000000"><div id="d12" style="background-color: #C0C0C0; width:$COLUMN_WID$px; overflow: hidden;" title="$FILE2_TITLE$"><b>$FILE2_TITLE$</b></div></td>
				</tr>
			</table>
		</td>
	</tr>
	<tr valign="top">
		<td>
			<table id="t2">
				<tr valign="top">
					<td id="t21" style="border: 1px solid #000000">
<div id="d21" style="overflow: scroll; width:$COLUMN_WID$px; height:$COLUMN_HEI$px;" onscroll="synchScroll(1)">
$FILE1_CONTENT$</div>
					</td>
					<td id="t22" style="border: 1px solid #000000">
<div id="d22" style="overflow: scroll; width:$COLUMN_WID$px; height:$COLUMN_HEI$px;" onscroll="synchScroll(2)">
$FILE2_CONTENT$</div>
					</td>
				</tr>
			</table>
		</td>
	</tr>
	<tr valign="top">
		<td>
			<table width="100%">
				<tr valign="top">
					<td>
						<table id="t3">
							<tr valign="top">
								<td><div><b>Legend:</b></div></td>$LEGEND$
							</tr>
						</table>
					</td>
					<!-- $NAV_BAR_BEGIN$ -->
					<td align="right">
						<table>
							<tr>
								<td><input type="button" value="<<" onclick="first()" title="First Difference"/></td>
								<td><input type="button" value="<" onclick="previous()" title="Previous Difference"/></td>
								<td>
									<select align="top" id="currentdiff" size="1" style="width: 70pt;" onchange="change()">
										<option selected id="1" value="0">Select Diff</option>
									</select>
								</td>
								<td><input type="button" value=">" onclick="next()" title="Next Difference"/></td>
								<td><input type="button" value=">>" onclick="last()" title="Last Difference"/></td>
							</tr>
						</table>
					</td>
					<!-- $NAV_BAR_END$ -->
				</tr>
			</table>
		</td>
	</tr>
</table>
</body>
</html>

